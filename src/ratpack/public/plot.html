<!DOCCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="js/lib/d3.min.js" type="text/javascript"></script>
        <script src="js/lib/moment.js" type="text/javascript"></script>
        <script src="js/lib/handlebars.js" type="text/javascript"></script>
        <script src="js/util.js" type="text/javascript"></script>
        <script src="js/map.js" type="text/javascript"></script>
        <script src="plot.js" type="text/javascript"></script>
        <script src="http://maps.google.com/maps/api/js?libraries=geometry&amp;sensor=false"type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="style.css"/>
    </head>
    <body>
        <script id="tooltip-template" type="text/x-handlebars-template">
<h4><a href="https://www.strava.com/activities/{{id}}">{{name}}</a></h4>
            <dl>
                <dt>Distance</dt><dd>{{distance}}</dd></dt>
                <dt>Moving Time</dt><dd>{{movingTime}}</dd></dt>
                <dt>Average Speed</dt><dd>{{averageSpeed}}</dd></dt>
                <dt>Average Heartrate</dt><dd>{{averageHeartrate}}</dd></dt>
            </dl>
        </script>
        <div id="tooltip" class="info-box tooltip"></div>
        <div id="map" class="info-box map"></div>
        <div class="info-box footer">
            Source code is available on <a href="https://github.com/HelgeKrueger/strava-plots">Github</a>.
        </div>
        <script type="text/javascript">
            var graph = new GraphBuilder()
                .withDimensions(800, 500)
                .withXValue(getValueForKey('distance'))
                .withYValue(getValueForKey('movingTime'))
                .withXTickFormat(metersToKilometers)
                .withYTickFormat(secondsToFormatHourMinute)
                .build();
            var svg = graph.addSvgToBody();
            d3.json('/data', function(error, json) {
                graph.configureDomain(json.rides, json.runs);
                graph.addAxes(svg);
                graph.addData(svg, json.rides, 'ride');
                graph.addData(svg, json.runs, 'run');
            });
        </script>
    </body>
</html>
